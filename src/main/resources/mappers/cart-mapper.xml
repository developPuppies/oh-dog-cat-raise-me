<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
<mapper namespace="com.ohdogcat.repository.CartDao">
	
	<select id="selectCartByMemberAndOption" resultType="Cart">
		select * from cart 
		where member_fk = #{member_fk} and option_fk = #{option_fk}
	</select>
	
	<insert id="insertCartNewItem">
		insert into cart 
		values (#{member_fk}, #{option_fk}, #{count})
	</insert>
	
	<update id="updateCartCount">
		update cart 
		set count = (select count from cart where member_fk = #{member_fk} and option_fk = #{option_fk}) + #{count}
		where member_fk = #{member_fk} and option_fk = #{option_fk}
	</update>
</mapper>